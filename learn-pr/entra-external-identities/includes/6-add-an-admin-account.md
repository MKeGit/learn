## Exercise - Add an admin account

In Microsoft Entra External ID, an external tenant represents your directory of consumer and guest accounts. With an administrator role, work and guest accounts can [manage the tenant](/entra/external-id/customers/quickstart-tenant-setup).

::: zone pivot="microsoft-entra-admin-center"

1. To add an admin account, sign in to the [Microsoft Entra admin center](https://entra.microsoft.com/) with Global Administrator or Privileged Role Administrator permissions and browse to **Identity** > **Users** > **All users**. Then, select **New user** > **Create new user**.
    ![alt text](../media/add-an-admin-account/1.png)
1. On the **New user** page, under **Select template**, select **Create user**. 
    - Under **Identity**, enter information for this admin: 
        1. **User name** - The user name of the new user. For example, emily@woodgrovelive.com. 
        1. **Name** - The name of the new user. For example, Emily Doe. Optionally, you can also enter a **First name** and **Last name**.
    -  Under **Password**, copy the autogenerated password provided in **Initial password**. You'll need to give this password to the admin to sign in for the first time.
    ![alt text](../media/add-an-admin-account/2.png)
1. To add administrative permissions for the user, add them to a Microsoft Entra role. You can assign the user to be a **Global Administrator** or one or more of the limited administrator roles in Microsoft Entra ID. Scroll down to the **Roles** section, and select a role in the directory. Then, choose **Select**.
    ![alt text](../media/add-an-admin-account/3.png)
1. To create the account, scroll down and select **Create**.
    ![alt text](../media/add-an-admin-account/4.png)
    ***Well done!** The admin is created and added to your customer tenant. It's preferable to have at least one admin account native to your customer tenant assigned the Global Administrator role. This account can be considered a break-glass account or emergency access account.*

::: zone-end

::: zone pivot="graph-api"

#### 1\. Create a user

To [create a user](/graph/api/user-post-users?view=graph-rest-1.0&tabs=http), replace the following values in the Microsoft Graph request:

- **displayName** with the user display name.
- **mailNickname** with a mail alias for the user. This property must be specified when a user is created.
- **userPrincipalName** with the principal name (UPN) of the user. The general format is alias@domain, where the domain must be present in the tenant's collection of verified domains.
- **password** with a temporary password that you will share with the user. During the first sign-in, the user will be asked to change their password.

##### Example

The following example shows how to create a new user account for Adele Vance.

```json
POST https://graph.microsoft.com/v1.0/applications
{
    "accountEnabled": true,
    "displayName": "Adele Vance",
    "mailNickname": "AdeleV",
    "userPrincipalName": "AdeleV@wggdemo.onmicrosoft.com",
    "passwordProfile": {
        "forceChangePasswordNextSignIn": true,
        "password": "12345678910"
    }
}
```

##### 1.1 Copy the user ID

From the response, copy the value of the **id**. For example:

```json
{
    "@odata.context": "https://graph.microsoft.com/v1.0/$metadata#users/$entity",
    "id": "123a123a-abc1-123a-abcd-123456789abc",
    ...
}        
```

#### 2\. Assign an admin role

After the new user is created, [create a (unified) role assignment](/graph/api/rbacapplication-post-roleassignments). In the following Graph request, replace the:

- **{user-id}** with the user **id** from the previous step.
- **{role-id}** with one of the [Microsoft Entra built-in roles](/entra/identity/role-based-access-control/permissions-reference).

```json
POST https://graph.microsoft.com/v1.0/servicePrincipals
{
    "@odata.type": "#microsoft.graph.unifiedRoleAssignment",
    "principalId": "{user-id}",
    "roleDefinitionId": "{role-id}",
    "directoryScopeId": "/"
}
```

##### Example

The following example assigns the Global Administrator role to Adele Vance

```json
POST https://graph.microsoft.com/v1.0/roleManagement/directory/roleAssignments
{
    "@odata.type": "#microsoft.graph.unifiedRoleAssignment",
    "principalId": "c123a123a-abc1-123a-abcd-123456789ab",
    "roleDefinitionId": "a321a321-1cba-a321-dcba-cba987654321",
    "directoryScopeId": "/"
}
```

::: zone-end
